<%- include('./layouts/header') %>
<%- include('./layouts/navbar') %>

<main style="
  margin-left: 220px;
  padding: 80px 30px 30px;
  min-height: 100vh;
  background: linear-gradient(to right top, #e6f9ea, #ccf5e1, #b2f1d8, #98edcf, #7fe9c6);
  font-family: 'Poppins', sans-serif;
">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<style>
  h1 {
    font-size: 1.8rem;
    color: #1f2937;
    font-weight: 700;
    margin-bottom: 20px;
  }

  .top-actions {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    margin-bottom: 20px;
    gap: 10px;
  }

  .back-link {
    text-decoration: none;
    color: #3b82f6;
    font-weight: 500;
    font-size: 14px;
  }

  .back-link:hover {
    text-decoration: underline;
  }

  .btn-add {
    padding: 10px 16px;
    background-color: #10b981;
    color: white;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none;
    transition: background 0.2s ease;
  }

  .btn-add:hover {
    background-color: #059669;
  }

  table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 10px;
    background-color: transparent;
    font-size: 14px;
  }

  thead th {
    background-color: #34d399;
    color: white;
    padding: 14px;
    text-align: left;
    font-weight: 600;
    border-radius: 6px 6px 0 0;
  }

  tbody tr {
    background: #ffffff;
    border-radius: 8px;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s ease;
  }

  tbody tr:hover {
    transform: scale(1.01);
  }

  tbody td {
    padding: 14px;
    vertical-align: middle;
    border-bottom: 1px solid #e5e7eb;
  }

  .action-buttons {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .btn-block {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    font-weight: 600;
    padding: 8px 12px;
    border-radius: 8px;
    text-decoration: none;
    transition: all 0.2s ease;
    color: white;
  }

  .btn-edit { background-color: #facc15; color: #111827; }
  .btn-delete { background-color: #ef4444; }

  .btn-block:hover {
    filter: brightness(0.9);
    transform: scale(1.03);
  }

  .btn-delete button {
    all: unset;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    color: white;
    cursor: pointer;
    padding: 8px 12px;
    background-color: #ef4444;
    border-radius: 8px;
    font-weight: 600;
    font-size: 13px;
    transition: all 0.2s ease;
  }

  .btn-delete button:hover {
    filter: brightness(0.9);
    transform: scale(1.03);
  }

  form { margin: 0; }
</style>

<h1>Troops in <%= school.name %></h1>

<div class="top-actions">
  <a href="/districts/<%= school.district %>" class="back-link">‚Üê Back to Schools</a>
  <a href="/addtroop?schoolId=<%= school._id %>" class="btn-add">+ Add Troop</a>
</div>

<table>
  <thead>
    <tr>
      <th>Troop Leader</th>
      <th>Co-Leader</th>
      <th>Troop No.</th>
      <th>Age Level</th>
      <th>Barangay Committee</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% troops.forEach(t => { %>
      <tr>
        <td><%= t.troopLeader %></td>
        <td><%= t.coLeader %></td>
        <td><%= t.troopNumber %></td>
        <td><%= t.ageLevel %></td>
        <td><%= t.barangayCommittee %></td>
        <td class="action-buttons">
          <a href="/troops/edit/<%= t._id %>" class="btn-block btn-edit">
            <i class="fas fa-pen"></i> Edit
          </a>
          <form action="/troops/delete/<%= t._id %>" method="POST" onsubmit="return confirm('Delete this troop?')">
            <input type="hidden" name="schoolId" value="<%= school._id %>">
            <button type="submit">
              <i class="fas fa-trash"></i> Delete
            </button>
          </form>
        </td>
      </tr>
    <% }); %>
  </tbody>
</table>
</main>

<%- include('./layouts/footer') %>
