<%- include('./layouts/header') %>

<h1>INDEX PAGE</h1>

<main>

    <div class="chart-container">
        <!-- Bar Chart for Troop Members in Districts -->
        <canvas id="barChart"></canvas>

        <!-- Pie Chart for Low to High Selling Products -->
        <canvas id="pieChart"></canvas>
    </div>

    <!-- Total Sales Box -->
    <div class="total-sales-box">
        <strong>Total Sales: â‚±<span id="totalSalesAmount">0</span></strong>
    </div>

</main>

<script>
    // Sample Data for Troop Members in Districts (Replace with your dynamic data)
    const districtData = [
        { name: 'Calapan', members: 120 },
        { name: 'Puerto Galera', members: 80 },
        { name: 'San Teodoro', members: 50 },
        { name: 'Baco', members: 30 },
        { name: 'Naujan', members: 95 },
    ];

    // Bar Chart: Troop Members by District
    const barChart = new Chart(document.getElementById('barChart'), {
        type: 'bar',
        data: {
            labels: districtData.map(district => district.name),
            datasets: [{
                label: 'Troop Members',
                data: districtData.map(district => district.members),
                backgroundColor: ['#FF6F61', '#FFB74D', '#81C784', '#64B5F6', '#FFEB3B'],
                borderColor: ['#D32F2F', '#F57C00', '#388E3C', '#1976D2', '#FBC02D'],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Sample Data for Low to High Selling Products (Replace with your dynamic data)
    const productData = [
        { name: 'Uniform', sales: 500 },
        { name: 'Badge', sales: 350 },
        { name: 'Socks', sales: 200 },
        { name: 'Scarf', sales: 450 },
        { name: 'Hat', sales: 600 },
    ];

    // Pie Chart: Low to High Selling Products
    const pieChart = new Chart(document.getElementById('pieChart'), {
        type: 'pie',
        data: {
            labels: productData.map(product => product.name),
            datasets: [{
                data: productData.map(product => product.sales),
                backgroundColor: ['#FF6F61', '#FFB74D', '#81C784', '#64B5F6', '#FFEB3B'],
                hoverOffset: 4
            }]
        },
        options: {
            responsive: true
        }
    });

    // Calculate Total Sales
    const totalSales = productData.reduce((acc, product) => acc + product.sales, 0);
    document.getElementById('totalSalesAmount').textContent = totalSales;

//     // Fetch Districts from Server (For Oriental Mindoro)
//     fetch('/districts/oriental-mindoro')
//         .then(res => res.json())
//         .then(districts => {
//             const dropdown = document.querySelector('.dropdown-content');
//             districts.forEach(district => {
//                 const li = document.createElement('li');
//                 li.innerHTML = `<a href="/districts/${district._id}/members">${district.name}</a>`;
//                 dropdown.appendChild(li);
//             });
//         })
//         .catch(err => console.error('Failed to load districts', err));
// </script>
<%- include('./layouts/footer') %>